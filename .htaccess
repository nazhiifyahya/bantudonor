RewriteEngine On

# Redirect URL /index ke /home (permanent redirect)
RewriteCond %{REQUEST_URI} ^/index$
RewriteRule ^index$ /home [R=301,L]

# Internal rewrite: URL /home ditangani oleh index.php (tetap /home di URL)
RewriteRule ^home$ index.php [L]

# Remove .php extension for cleaner URLs
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L]

# Redirect URL yang mengandung .php ke URL tanpa ekstensi .php
RewriteCond %{THE_REQUEST} \s/([^\s]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]

# Melindungi file .htaccess dan file konfigurasi lainnya
<FilesMatch "^\.">
  Require all denied
</FilesMatch>

# Set default timezone
php_value date.timezone "Asia/Jakarta"

# Enable error reporting for development
php_flag display_errors On
php_value error_reporting E_ALL

# Cache control dasar untuk file statis (gambar, css, js)
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 month"
  ExpiresByType image/jpeg "access plus 1 month"
  ExpiresByType image/gif "access plus 1 month"
  ExpiresByType image/png "access plus 1 month"
  ExpiresByType text/css "access plus 1 week"
  ExpiresByType application/javascript "access plus 1 week"
  ExpiresByType text/javascript "access plus 1 week"
  ExpiresByType image/svg+xml "access plus 1 month"
</IfModule>